{"version":3,"sources":["webpack:///C:/Users/67677/Desktop/汕大论坛/STUF/src/components/square/PostBar.vue?6128","webpack:///C:/Users/67677/Desktop/汕大论坛/STUF/src/components/square/PostBar.vue?3ff9","webpack:///C:/Users/67677/Desktop/汕大论坛/STUF/src/components/square/PostBar.vue?fef4","webpack:///C:/Users/67677/Desktop/汕大论坛/STUF/src/components/square/PostBar.vue?0cc9","uni-app:///src/components/square/PostBar.vue","webpack:///C:/Users/67677/Desktop/汕大论坛/STUF/src/components/square/PostBar.vue?6d23","webpack:///C:/Users/67677/Desktop/汕大论坛/STUF/src/components/square/PostBar.vue?9430"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACqC;;;AAG3F;AAC6M;AAC7M,gBAAgB,2MAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAszB,CAAgB,uwBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqB10B,uE;;;;;;;;;;;;;;;;;;;;eAIA,EACA,eADA,EAEA,IAFA,kBAEA,CACA,SACA,WADA,EAEA,wBAFA,EAEA;AACA,oBAHA,EAGA;AACA,2BAJA,EAIA;AACA,kBALA,EAKA;AACA,mBANA,CAMA;AANA,MAQA,CAXA,EAYA,oBAZA,EAaA,WACA;AACA,eAFA,yBAEA,sBACA,SADA,GACA,IADA,CACA,SADA,CACA,OADA,GACA,IADA,CACA,OADA,CAEA,oBACA,oBACA,wCACA,iBACA,eADA,EAEA;AACA;AACA;AACA;AACA,WANA;AAOA;AACA;AACA,6CADA;AAEA,qBAFA,mBAEA,GAFA,EAEA;AACA;AACA;AACA;AACA,wDADA;AAEA,2BAFA,qBAEA;AACA;AACA,qBAJA;AAKA,wBALA,gBAKA,IALA,EAKA;AACA;AACA,qBAPA;;AASA,iBAXA,MAWA;AACA;AACA;AACA,eAjBA;;AAmBA;AACA,WA5BA;;AA8BA,OA/BA,EA+BA,IA/BA,CA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BADA;AAEA,wBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OAjDA,EAiDA,KAjDA,CAiDA;AACA;AACA,OAnDA;AAoDA,KA1DA;AA2DA;AACA,sBA5DA,8BA4DA,QA5DA,EA4DA;AACA;AACA;AACA;AACA,uBADA;AAEA,sBAFA;;AAIA;AACA,OANA;AAOA;AACA;AACA,uBADA;AAEA,sBAFA;;;AAKA;AACA,OAdA;;AAgBA;AACA;AACA;AACA;AACA,KAlFA;AAmFA;AACA,qBApFA,6BAoFA,OApFA,EAoFA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,wBAFA;;AAIA;AACA;AACA;AACA,uBADA;AAEA,sBAFA;;AAIA;AACA,OAdA;AAeA;AACA;AACA,uBADA;AAEA,sBAFA;;AAIA,OApBA;;AAsBA;AACA;AACA;AACA;AACA,KAhHA,EAbA;;AA+HA,SA/HA,qBA+HA;AACA;AACA;AACA;AACA,uCAFA,CAEA;AACA;AACA,4BADA,CACA;AACA,OAFA;AAGA,KANA;AAOA;AACA;AACA;AACA;AACA,wDAHA,CAGA;AACA;AACA,4BADA,CACA;AACA,OAFA;AAGA,KAPA;AAQA;AACA;AACA;AACA;AACA;AACA,gDAJA,CAIA;AACA;AACA,4BADA,CACA;AACA,OAFA;AAGA,KARA;AASA,GA3JA;AA4JA;AACA,eA7JA,2BA6JA;AACA;AACA;AACA;AACA,GAjKA,E;;;;;;;;;;;;;ACzBA;AAAA;AAAA;AAAA;AAAqrC,CAAgB,glCAAG,EAAC,C;;;;;;;;;;;ACAzsC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"src/components/square/PostBar.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./PostBar.vue?vue&type=template&id=ddf89c5e&scoped=true&\"\nvar renderjs\nimport script from \"./PostBar.vue?vue&type=script&lang=js&\"\nexport * from \"./PostBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PostBar.vue?vue&type=style&index=0&id=ddf89c5e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ddf89c5e\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"src/components/square/PostBar.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./PostBar.vue?vue&type=template&id=ddf89c5e&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./PostBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./PostBar.vue?vue&type=script&lang=js&\"","<!-- 发布导航栏 -->\r\n<template>\r\n  <view class=\"post_bar\">\r\n    <view class=\"post_input\">\r\n      <input\r\n        type=\"text\"\r\n        class=\"post_input_text\"\r\n        ref=\"inputContent\"\r\n        v-model=\"content\"\r\n        :placeholder=\"placeholder\"\r\n        :focus=\"isFocus\"\r\n      />\r\n    </view>\r\n    <!-- <view class=\"post_pic\" @click=\"postPic\">\r\n\t\t\t<image src=\"../../../static/icons/square/postPic.png\" mode=\"widthFix\"></image>\r\n\t\t</view> -->\r\n    <view class=\"post_button\" @click=\"submitReply\"> 发布 </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  createFirstComment,\r\n  createSecondComment,\r\n} from \"../../axios/square/square\";\r\nexport default {\r\n  name: \"PostBar\",\r\n  data() {\r\n    return {\r\n      content: \"\",\r\n      placeholder: \"输入你的评论...\", //输入提示框\r\n      isFocus: false, //是否聚焦\r\n      isFirstCommment: true, //默认是一级评论的回复\r\n      commentId: 1, //被回复评论的id\r\n      replyId: null, //回复者的id\r\n    };\r\n  },\r\n  props: [\"articleId\"],\r\n  methods: {\r\n    //发布\r\n    submitReply() {\r\n      let { articleId, content } = this;\r\n\t  let islogin=false;\r\n\t  let userInfo=null;\r\n\t  new Promise((resolve,reject)=>{\r\n\t\t  uni.getStorage({\r\n\t\t  \tkey:\"userInfo\",\r\n\t\t  \t\tsuccess:(data)=>{\r\n\t\t  \t\t\tuserInfo=data;\r\n\t\t  \t\t\tislogin=true;\r\n\t\t\t\t\tresolve(1);\r\n\t\t  \t\t},\r\n\t\t  \t\tfail:()=> {\r\n\t\t  \t\t\tuni.showModal({\r\n\t\t  \t\t\t\ttitle:\"您还没有登陆不能发布评论，点击确定现在去登陆\",\r\n\t\t  \t\t\t\tsuccess(res) {\r\n\t\t  \t\t\t\t\t if (res.confirm) {\r\n\t\t  \t\t\t\t\t   console.log(\"跳转到登陆页面\")\r\n\t\t  \t\t\t\t\t   uni.reLaunch({\r\n\t\t  \t\t\t\t\t\t\turl:\"/src/pages/level1/login/login\",\r\n\t\t  \t\t\t\t\t\t\tsuccess() {\r\n\t\t  \t\t\t\t\t\t\t\tconsole.log(\"跳转成功\")\r\n\t\t  \t\t\t\t\t\t\t},\r\n\t\t  \t\t\t\t\t\t\tfail(data) {\r\n\t\t  \t\t\t\t\t\t\t\tconsole.log(\"跳转失败\",data)\r\n\t\t  \t\t\t\t\t\t\t}\r\n\t\t  \t\t\t\t\t   })\r\n\t\t  \t\t\t\t\t } else if (res.cancel) {\r\n\t\t  \t\t\t\t\t     console.log('用户点击取消');\r\n\t\t  \t\t\t\t\t }\r\n\t\t  \t\t\t\t\t}\r\n\t\t  \t\t\t\t})\r\n\t\t\t\t\treject(1);\r\n\t\t  \t\t}\r\n\t\t  })\r\n\t  }).then(res=>{\r\n\t\t\t//没有登陆就直接结束\r\n\t\t\tif(!islogin){\r\n\t\t\t\t\t  return;\r\n\t\t\t}\r\n\t\t\tif (!content) {\r\n\t\t\t  uni.showToast({\r\n\t\t\t    title: \"内容不能为空！！！！\",\r\n\t\t\t    icon: \"none\",\r\n\t\t\t  });\r\n\t\t\t  return;\r\n\t\t\t}\r\n\t\t\tlet paramObj = { articleId, content };\r\n\t\t\tif (this.isFirstCommment) {\r\n\t\t\t  this.createFirstComment(paramObj);\r\n\t\t\t} else {\r\n\t\t\t  this.replyFirstComment(content);\r\n\t\t\t}\r\n\t  }).catch(err=>{\r\n\t\t  console.log(err);\r\n\t  })\r\n    },\r\n    // 发表一级评论\r\n    createFirstComment(paramObj) {\r\n      this.isFirstCommment = true;\r\n      createFirstComment(paramObj).then((res) => {\r\n        uni.showToast({\r\n          title: \"回复成功\",\r\n          icon: \"none\",\r\n        });\r\n        console.log(\"回复成功！\");\r\n      }),\r\n        (err) => {\r\n          uni.showToast({\r\n            title: \"回复失败\",\r\n            icon: \"none\",\r\n          });\r\n\r\n          console.log(\"回复失败！\");\r\n        };\r\n\r\n      //刷新所有的评论\r\n      this.$emit(\"submitReply\", this.content);\r\n      //清空输入框的内容\r\n      this.content = \"\";\r\n    },\r\n    //回复一级评论,产生二级评论\r\n    replyFirstComment(content) {\r\n      let param = { content, commentId: this.commentId, replyId: this.replyId };\r\n      createSecondComment(param).then(\r\n        (res) => {\r\n\t\t  if(res.data.state==404){\r\n\t\t\t  uni.showToast({\r\n\t\t\t  \ttitle:\"下拉刷新后试试噢\",\r\n\t\t\t\ticon:\"none\"\r\n\t\t\t  })\r\n\t\t\t  return;\r\n\t\t  }\r\n          uni.showToast({\r\n            title: \"回复成功\",\r\n            icon: \"none\",\r\n          });\r\n\t\t   this.$bus.$emit(\"reflashSecondComment\",param);\r\n        },\r\n        (err) => {\r\n          uni.showToast({\r\n            title: \"回复失败\",\r\n            icon: \"none\",\r\n          });\r\n        }\r\n      );\r\n      this.content = \"\";\r\n      this.placeholder = \"输入你的评论...\";\r\n      this.isFirstCommment = true;\r\n      this.replyId=null;\r\n    },\r\n  },\r\n  mounted() {\r\n    //发布一级评论\r\n    this.$bus.$on(\"createFirstComment\", () => {\r\n      this.isFirstCommment = true;\r\n      this.placeholder = \"输入你的评论...\"; //设置提示\r\n      this.$nextTick(function () {\r\n        this.isFocus = true; //获取焦点\r\n      });\r\n    });\r\n    //一级评论的回复，产生二级评论\r\n    this.$bus.$on(\"replyFirstComment\", (data) => {\r\n      this.isFirstCommment = false;\r\n      this.commentId = data.commentId;\r\n      this.placeholder = \"评论\" + data.userName + \"的评论\"; //设置提示\r\n      this.$nextTick(function () {\r\n        this.isFocus = true; //获取焦点\r\n      });\r\n    });\r\n    //回复二级评论\r\n    this.$bus.$on(\"replyPerson\", (data) => {\r\n      this.isFirstCommment = false;\r\n      this.commentId = data.commentId;\r\n      this.replyId = data.uid;\r\n      this.placeholder = \"回复\" + data.userName; //设置提示\r\n      this.$nextTick(function () {\r\n        this.isFocus = true; //获取焦点\r\n      });\r\n    });\r\n  },\r\n  //取消监听\r\n  beforeDestroy() {\r\n    this.$bus.$off(\"replyFirstComment\");\r\n\tthis.$bus.$off(\"createFirstComment\");\r\n\tthis.$bus.$off(\"replyPerson\");\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.post_bar {\r\n  background-color: #ffffff;\r\n  box-shadow: 0px -1px 10px 1px #eef3f2;\r\n  height: 146rpx;\r\n  width: 100%;\r\n  position: fixed;\r\n  bottom: 0;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.post_input {\r\n  margin-left: 28rpx;\r\n  height: 60rpx;\r\n  width: 500rpx;\r\n  background-color: #e7e7e7;\r\n  margin-right: 64rpx;\r\n  border-radius: 60rpx;\r\n}\r\n.post_input_text {\r\n  height: 100%;\r\n\r\n  margin-left: 20rpx;\r\n}\r\n.post_pic {\r\n  margin: 0 20rpx;\r\n}\r\n.post_pic image {\r\n  width: 64rpx;\r\n}\r\n.post_button {\r\n  width: 98rpx;\r\n  height: 46rpx;\r\n  background-color: #ffebc2;\r\n  border-radius: 46rpx;\r\n  text-align: center;\r\n  line-height: 46rpx;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./PostBar.vue?vue&type=style&index=0&id=ddf89c5e&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./PostBar.vue?vue&type=style&index=0&id=ddf89c5e&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1629619542394\n      var cssReload = require(\"C:/HBuilderX.3.1.7.20210330.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}